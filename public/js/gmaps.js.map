{"version":3,"sources":["gmaps.coffee"],"names":[],"mappings":"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","file":"gmaps.js","sourceRoot":"/source/","sourcesContent":["initialize = ->\n  container = document.getElementById 'maps-container'\n  locationField = document.getElementById 'field-maps-location'\n\n  initializeMaps container if container?\n  initializeAutoComplete locationField, koolbeans.map if locationField?\n\ninitializeMaps = (container) ->\n  options =\n    zoom: 15\n    styles: [\n      featureType: \"poi\"\n      elementType: \"labels\"\n      stylers: [visibility: \"off\"]\n    ]\n\n  if container.dataset.position?\n    position = container.dataset.position.split ','\n    options.position = new google.maps.LatLng position[0], position[1]\n\n  koolbeans.map = new google.maps.Map container, options\n  koolbeans.marker = new google.maps.Marker\n    map: koolbeans.map\n    anchorPoint: new google.maps.Point 0, -29\n  koolbeans.infoWindow = new google.maps.InfoWindow\n\n  useGeoLocation koolbeans.map if navigator.geolocation\n\nuseGeoLocation = (map) ->\n  navigator.geolocation.getCurrentPosition (position) ->\n    map.setCenter new google.maps.LatLng(position.coords.latitude, position.coords.longitude)\n\ninitializeAutoComplete = (locationField, map) ->\n  autoComplete = new google.maps.places.Autocomplete locationField\n\n  bindMapToAutoComplete autoComplete, map if map?\n\nbindMapToAutoComplete = (autoComplete, map) ->\n  autoComplete.bindTo 'bounds', map\n\n  google.maps.event.addListener autoComplete, 'place_changed', placeChanged(autoComplete)\n\nplaceChanged = (autoComplete) -> () ->\n  hideMarkerAndWindow()\n\n  place = autoComplete.getPlace()\n  return if !place.geometry\n\n  centerMapOn place\n  moveMarkerTo place\n  openInfoWindow place, koolbeans.marker\n  changeFormFields place\n\nhideMarkerAndWindow = () ->\n  koolbeans.infoWindow.close();\n  koolbeans.marker.setVisible(false);\n\ncenterMapOn = (place) ->\n  if place.geometry.viewport\n    koolbeans.map.fitBounds place.geometry.viewport\n  else\n    koolbeans.map.setCenter place.geometry.location\n    koolbeans.map.setZoom 17\n\nmoveMarkerTo = (place) ->\n  koolbeans.marker.setPosition place.geometry.location\n  koolbeans.marker.setVisible true\n  koolbeans.marker.setIcon\n    url: place.icon,\n    size: new google.maps.Size(71, 71),\n    origin: new google.maps.Point(0, 0),\n    anchor: new google.maps.Point(17, 34),\n    scaledSize: new google.maps.Size(35, 35)\n\nopenInfoWindow = (place, marker) ->\n  address = [\n    (place.address_components[0] && place.address_components[0].short_name || ''),\n    (place.address_components[1] && place.address_components[1].short_name || ''),\n    (place.address_components[2] && place.address_components[2].short_name || '')\n  ].join(' ')\n\n  koolbeans.infoWindow.setContent('<div><strong>' + place.name + '</strong><br>' + address);\n  koolbeans.infoWindow.open(koolbeans.map, marker);\n\nchangeFormFields = (place) ->\n  for component in place.address_components\n    if component.types.indexOf('postal_code') != -1\n      document.getElementById('postal_code').setAttribute 'value', component.short_name\n  document.getElementById('latitude-field').setAttribute 'value', place.geometry.location.lat()\n  document.getElementById('longitude-field').setAttribute 'value', place.geometry.location.lng()\n  document.getElementById('place-id-field').setAttribute 'value', place.place_id\n\ngoogle.maps.event.addDomListener window, 'load', initialize\n"]}